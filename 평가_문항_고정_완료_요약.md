# 📋 평가 문항 고정 완료 요약

## ✅ 완료된 작업

### 1. LNF (Letter Naming Fluency) - 200개 고정 문항
- **변경 전**: 랜덤 52개 알파벳
- **변경 후**: 고정된 200개 알파벳 문항
- **파일**: `src/app/test/lnf/page.tsx`
- **구성**: 대문자 81개, 소문자 119개

### 2. PSF (Phoneme Segmentation Fluency) - 107개 고정 문항
- **변경 전**: 랜덤 10개 단어
- **변경 후**: 고정된 107개 단어
- **파일**: `src/app/test/psf/page.tsx`
- **구성**: CVC 60개, CCVC/CVCC 40개, 복합 7개

### 3. NWF (Nonsense Word Fluency) - 150개 고정 문항
- **변경 전**: 랜덤 11개 nonsense words
- **변경 후**: 고정된 150개 nonsense words (중복 제거)
- **파일**: `src/app/test/nwf/page.tsx`
- **구성**: CVC 90개 (60%), CCVC/CVCC 50개 (33%), 복합 10개 (7%)

### 4. WRF (Word Reading Fluency) - 85개 고정 문항
- **변경 전**: 랜덤 20개 sight words
- **변경 후**: 고정된 85개 sight words (중복 제거)
- **파일**: `src/app/test/wrf/page.tsx`
- **구성**: 초고빈도 15개 (18%), 고빈도 35개 (41%), 중빈도 25개 (29%), 저빈도 10개 (12%)

### 5. ORF (Oral Reading Fluency) - 고정 지문
- **변경 전**: 단순 단문 지문 (약 40단어)
- **변경 후**: 5개 미니 스토리 대화형 지문 (약 150단어)
- **파일**: `src/app/test/orf/page.tsx`
- **구성**: Four Dogs, Ball, Orange Juice, At the Desk, In the Park

### 6. MAZE (Maze Comprehension) - 고정 지문 ✨
- **변경 전**: Annabelle's Garage (성인 수준, 어려움)
- **변경 후**: Daily Conversations and Stories (초등 수준, 4개 스토리, 20문항)
- **파일**: `src/app/test/maze/page.tsx`
- **구성**: Hi I'm Hana, My Puppy, A Day at the Beach, In the Kitchen
- **수정 사항**: 중복 정답 제거 (bread → butter)

### 7. PSF 분석 API 추가
- **파일**: `src/app/api/analysis/psf/route.ts`
- **기능**: 어려운 단어, 학생 약점, 반별 요약 분석

---

## 🎯 변경의 교육적 효과

### LNF 평가
✅ **모든 학생이 동일한 문항**으로 평가
- 학생 간 직접 비교 가능
- 알파벳별 정답률 분석
- 대문자/소문자 난이도 비교
- 혼동하기 쉬운 알파벳 쌍 파악 (b-d, p-q 등)

### PSF 평가
✅ **모든 학생이 동일한 107개 단어**로 평가
- 단어별 정답률 분석
- 음소 패턴별 난이도 파악
- 자음군 처리 능력 측정
- 단어 복잡도별 성취도 확인

### NWF 평가
✅ **모든 학생이 동일한 150개 nonsense words**로 평가
- 파닉스 규칙 적용 능력 측정
- 자음군(blends) 디코딩 능력 분석
- CLS vs WWR 비교 (음소 vs 블렌딩)
- 단어 패턴별 성취도 파악

### WRF 평가
✅ **모든 학생이 동일한 85개 sight words**로 평가
- Sight words 자동 인식 능력 측정
- 빈도별 어휘 숙지도 분석
- 주제별 어휘 강약점 파악
- 불규칙 철자 단어 인지도 측정

### ORF 평가
✅ **모든 학생이 동일한 대화형 지문** (150단어)으로 평가
- WCPM (분당 정확 단어 수) 측정
- 읽기 정확도 분석
- 유창성 vs 정확도 균형
- 대화체 읽기 능력 평가
- 점진적 난이도 증가 (5개 스토리)

### MAZE 평가 ✨
✅ **모든 학생이 동일한 지문** (4개 스토리, 20문항)으로 평가
- 문맥 이해 능력 측정
- 품사별 지식 확인
- 논리적 추론 능력 평가
- 일상 상황 이해도 측정
- 초등 수준에 적합한 내용

---

## 📊 분석 가능한 데이터

### LNF 분석
1. **알파벳별 정답률** - 어떤 알파벳이 어려운가?
2. **대문자 vs 소문자** - 어느 것이 더 어려운가?
3. **혼동 알파벳** - b-d, p-q 등 비슷한 알파벳
4. **학생 간 비교** - 같은 문항으로 공정한 비교
5. **진도율** - 60초에 몇 문항까지 완료했는가?

### PSF 분석
1. **단어별 정답률** - 어떤 단어가 어려운가?
2. **음소 개수별 난이도** - 2음소 vs 4음소
3. **단어 패턴 분석** - CVC, CCVC, CVCC
4. **자음군 처리 능력** - 초성/종성 자음군
5. **모음 유형별 난이도** - 단모음 vs 이중모음
6. **개인별 약점 음소** - 맞춤형 학습 계획
7. **성장 추적** - 재평가 시 향상도 측정

### NWF 분석
1. **CLS vs WWR** - 음소 인식 vs 블렌딩 능력
2. **패턴별 디코딩** - CVC, CCVC, CVCC, 복합
3. **자음군 능력** - l-blends, r-blends, s-blends
4. **블렌딩 격차** - 음소는 알지만 합성 못하는 학생
5. **자음군 유형별** - bl, cl, fr, gr, st, sm 등 세부 분석
6. **수준별 그룹핑** - 상/중/하 그룹 편성
7. **개인 학습 계획** - 약점 패턴 중심 연습

### WRF 분석
1. **빈도별 숙지도** - 초고빈도 vs 저빈도 정답률
2. **주제별 어휘** - 숫자, 색깔, 동물, 동작 등
3. **불규칙 철자** - 파닉스 불가능한 단어 인지도
4. **단어 길이별** - 짧은 vs 긴 단어 인지
5. **개인 플래시카드** - 틀린 단어 맞춤 목록
6. **반복 오답 분석** - 학습 효과 낮은 단어
7. **성장 추적** - 새로 익힌 단어 수

### ORF 분석
1. **WCPM 측정** - 읽기 속도 정량화
2. **정확도 분석** - 실수율 측정
3. **유창성 유형** - 속도형 vs 정확형 vs 균형형
4. **읽기 발달 단계** - 단어별 → 구문별 → 유창 → 표현적
5. **성장 곡선** - WCPM 증가 추이
6. **학년별 기대치** - 목표 대비 성취도
7. **반별 비교** - 표준편차로 편차 확인

### MAZE 분석 ✨
1. **MAZE 점수** - 정답 - 오답 계산
2. **문항별 정답률** - 어려운 문항 파악
3. **오답 패턴** - 자주 선택되는 오답 분석
4. **스토리별 난이도** - 어느 스토리가 어려운지
5. **ORF-MAZE 통합** - 유창성 vs 독해력 상관관계
6. **WRF-MAZE 통합** - 어휘 vs 독해력 상관관계
7. **종합 읽기 프로필** - 5개 테스트 통합 분석

---

## 📁 생성된 파일

### 문서
1. **`LNF_문항_고정_가이드.md`** - LNF 분석 방법
2. **`PSF_문항_고정_및_분석_가이드.md`** - PSF 분석 방법
3. **`NWF_문항_고정_및_분석_가이드.md`** - NWF 분석 방법
4. **`WRF_문항_고정_및_분석_가이드.md`** - WRF 분석 방법
5. **`ORF_문항_고정_및_분석_가이드.md`** - ORF 분석 방법
6. **`MAZE_문항_고정_및_분석_가이드.md`** - MAZE 분석 방법 ✨
7. **`PSF_교육_분석_템플릿.sql`** - PSF SQL 쿼리
8. **`NWF_교육_분석_템플릿.sql`** - NWF SQL 쿼리
9. **`WRF_교육_분석_템플릿.sql`** - WRF SQL 쿼리
10. **`ORF_교육_분석_템플릿.sql`** - ORF SQL 쿼리
11. **`MAZE_교육_분석_템플릿.sql`** - MAZE SQL 쿼리 ✨
12. **`평가_문항_고정_완료_요약.md`** - 이 문서

### 코드
1. **`src/app/test/lnf/page.tsx`** - LNF 고정 문항 (200개)
2. **`src/app/test/psf/page.tsx`** - PSF 고정 문항 (107개)
3. **`src/app/test/nwf/page.tsx`** - NWF 고정 문항 (150개)
4. **`src/app/test/wrf/page.tsx`** - WRF 고정 문항 (85개)
5. **`src/app/test/orf/page.tsx`** - ORF 고정 지문 (150단어)
6. **`src/app/test/maze/page.tsx`** - MAZE 고정 지문 (20문항) ✨
7. **`src/app/api/analysis/psf/route.ts`** - PSF 분석 API

---

## 🚀 사용 방법

### 1. 평가 실시
```
학생들에게 평가 진행
→ 모든 학생이 동일한 문항 받음
→ 결과가 자동으로 데이터베이스에 저장
```

### 2. 데이터 분석

#### 방법 A: SQL 쿼리 (추천)
```
Supabase Dashboard → SQL Editor
→ PSF_교육_분석_템플릿.sql 열기
→ 원하는 쿼리 복사하여 실행
```

#### 방법 B: API 호출
```javascript
// 어려운 단어 TOP 20
fetch('/api/analysis/psf?type=difficult-words')

// 특정 학생 약점
fetch('/api/analysis/psf?type=student-weak&studentId=UUID')

// 반별 요약
fetch('/api/analysis/psf?type=class-summary&className=나루초 3학년 다솜반')
```

### 3. 결과 활용
```
SQL 결과 → CSV 다운로드 → Excel 분석
→ 학부모 상담 자료
→ 개인별 학습 계획
→ 반별 수업 계획
```

---

## 📈 교육적 활용 예시

### 시나리오 1: 반 전체 약점 파악
```sql
-- PSF_교육_분석_템플릿.sql의 4-1번 쿼리 사용
-- 결과: frog, lion, crab이 어려움
-- 조치: 다음 주 수업에서 자음군 집중 학습
```

### 시나리오 2: 개인 학습 계획
```sql
-- 3-2번 쿼리로 김민수 학생 분석
-- 결과: 4음소 단어 정확도 65%
-- 조치: camp, hand, stop 등 4음소 단어 집중 과제
```

### 시나리오 3: 수준별 그룹 편성
```sql
-- 8-1번 쿼리로 학생 그룹핑
-- 상위: 심화 학습 (복합 단어)
-- 중위: 자음군 연습
-- 하위: CVC 패턴 집중
```

### 시나리오 4: 학습 효과 검증
```sql
-- 5-1번 쿼리로 재평가 비교
-- 1차: 70% → 2차: 85% (15%p 향상)
-- 조치: 현재 학습 방법 유지
```

---

## 🎨 향후 대시보드 기능 아이디어

### 1. PSF 약점 단어 위젯
```
┌─────────────────────────────────┐
│ 📊 반 전체가 어려워하는 단어    │
├─────────────────────────────────┤
│ 1. lion   (62.5%)               │
│ 2. crab   (65.8%)               │
│ 3. frog   (68.2%)               │
│                                 │
│ 💡 추천: 자음군 집중 학습       │
└─────────────────────────────────┘
```

### 2. 학생 음소 인식 프로필
```
┌─────────────────────────────────┐
│ 김민수 학생 음소 인식 프로필    │
├─────────────────────────────────┤
│ CVC 패턴:     ████████████ 85% │
│ CCVC 패턴:    ████████░░░░ 70% │
│ CVCC 패턴:    ██████░░░░░░ 65% │
│ 복합 패턴:    ████░░░░░░░░ 55% │
│                                 │
│ 💡 개선 필요: 자음군 분리       │
└─────────────────────────────────┘
```

### 3. 반별 비교 차트
```
┌─────────────────────────────────┐
│ PSF 반별 평균 정확도            │
├─────────────────────────────────┤
│ 나루초 3-다솜: ██████████ 85%  │
│ 우암초 3-1:    ████████░░ 80%  │
│ 단재초 4-1:    ███████░░░ 75%  │
│ 단재초 4-2:    ███████░░░ 75%  │
│ 단재초 4-3:    ██████░░░░ 70%  │
└─────────────────────────────────┘
```

---

## 📚 SQL 쿼리 치트시트

### 자주 사용하는 쿼리

#### 1. 어려운 단어 TOP 10
```sql
SELECT question_word, 
  ROUND(AVG(correct_segments::FLOAT / target_segments * 100), 1) AS 정확도
FROM test_results
WHERE test_type = 'PSF'
GROUP BY question_word
ORDER BY 정확도 ASC LIMIT 10;
```

#### 2. 학생별 성적
```sql
SELECT up.full_name, up.class_name,
  ROUND(AVG(tr.correct_segments::FLOAT / tr.target_segments * 100), 1) AS 정확도
FROM test_results tr
JOIN user_profiles up ON tr.user_id = up.id
WHERE tr.test_type = 'PSF'
GROUP BY up.full_name, up.class_name
ORDER BY 정확도 DESC;
```

#### 3. 반별 약점 단어
```sql
SELECT tr.question_word,
  ROUND(AVG(tr.correct_segments::FLOAT / tr.target_segments * 100), 1) AS 정확도
FROM test_results tr
JOIN user_profiles up ON tr.user_id = up.id
WHERE tr.test_type = 'PSF' AND up.class_name = '나루초 3학년 다솜반'
GROUP BY tr.question_word
HAVING AVG(tr.correct_segments::FLOAT / tr.target_segments * 100) < 70
ORDER BY 정확도 ASC;
```

---

## 🎓 교육 권장사항

### 음소 인식 지도 단계

**1단계: 기초 (2-3음소)**
- 목표 단어: on, go, at, up, cat, map, sit, dog
- 활동: 천천히 음소 분리 연습
- 기준: 90% 이상 정확도

**2단계: 중급 (4음소, 단순 패턴)**
- 목표 단어: hand, camp, stop, star, belt
- 활동: 자음군 인식 훈련
- 기준: 80% 이상 정확도

**3단계: 심화 (복합 단어)**
- 목표 단어: lion, crab, coin, deep, drum
- 활동: 빠른 음소 분리, 이중모음 인식
- 기준: 75% 이상 정확도

---

## 💡 실전 팁

### 데이터 내보내기
```
Supabase SQL Editor에서 쿼리 실행
→ Results 탭
→ Download CSV 버튼
→ Excel에서 추가 분석
```

### 학부모 상담 자료
```
학생별 약점 단어 출력
→ 가정에서 연습할 단어 목록 제공
→ 재평가 후 향상도 확인
```

### 수업 계획
```
반 전체 약점 단어 파악
→ 다음 주 수업 주제 선정
→ 관련 활동 및 게임 준비
```

---

**이제 6개 평가(LNF, PSF, NWF, WRF, ORF, MAZE) 모두 고정 문항으로 전환 완료! 🎉**

### 📊 총 문항 수
- ✅ LNF: 200개 (알파벳)
- ✅ PSF: 107개 (단어 → 음소 분리)
- ✅ NWF: 150개 (nonsense words)
- ✅ WRF: 85개 (sight words)
- ✅ ORF: 1개 (150단어 대화형 지문)
- ✅ MAZE: 20개 (독해 문항, 4개 스토리)
- **합계: 563개 고정 문항/지문**

### 🎯 달성 효과

모든 학생이 같은 문항을 받아:
- ✅ **공정한 비교** - 학생 간, 반 간 객관적 비교
- ✅ **정확한 약점 파악** - 문항별 정답률로 약점 식별
- ✅ **효과적인 학습 계획** - 데이터 기반 맞춤 교육
- ✅ **객관적인 성장 측정** - 재평가 시 향상도 정량화
- ✅ **교육 효과 검증** - 학습 전후 비교 가능

가능해졌습니다! 🎉

